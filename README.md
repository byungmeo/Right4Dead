# Right4Dead (Left4Dead2 모작)

> 프로젝트 기간: 2025.02.06 ~ 2025.03.05 
> 팀 규모: 2인  
> 사용 엔진: Unreal Engine 5 (C++ 및 Blueprint 병행)  
> 장르: 호러 서바이벌 FPS 게임

---

## 프로젝트 개요

Right4Dead는 밸브사의 FPS 게임 **Left 4 Dead 2**를 언리얼 엔진으로 구현한 모작 프로젝트입니다.

플레이어는 생존자 캐릭터를 조작하여 몰려오는 좀비 무리를 상대하며,

실제 Left 4 Dead 2의 주요 시스템 (무기 슬롯, 좀비 AI, 특수 좀비 등)을 재현했습니다.

---

## 주요 기능

| 기능 항목             | 설명                                                                 |
|----------------------|----------------------------------------------------------------------|
| 좀비AI | 좀비들이 플레이어를 인지하면 추적하고 공격하는 AI를 구현, FSM을 통해 상태(순찰, 추격, 공격, 사망)를 전이하며 이동 및 공격을 수행              |
| 무기 슬롯 시스템        | 여러 종류의 무기를 소지할 수 있는 인벤토리 슬롯 시스템 구현        |
| 무기별 공격 메커니즘      | 총기류, 근접무기, 투척무기 별 공격 구현                    |
| 좀비 웨이브 및 스폰 시스템     | Zombie Spawn Manager를 통해 일정 수 이상의 좀비를 풀(Pool)로 관리하고 스폰 지점을 제어          |
| 사지 절단 효과        | 좀비에게 피해를 줄 경우 좀비의 신체 일부가 탈락하는 효과를 구현               |
| 목표 이벤트        | 콜라 배달 미션 구현              |


---

## 기술적 구현 상세

### 무기 시스템 (Weapon System)

- 무기 슬롯: TMap<EWeaponType, AWeaponBase*> 을 통해 무기 슬롯별로 현재 장착된 무기 객체를 관리
- 무기 데이터 구조체를 이용해 공통 속성 관리
- 무기별 발사 및 공격 구현 및 이펙트 구현
- 맵 상에 배치된 무기를 Overlap 이벤트를 통해 획득

### 좀비 AI (Zombie AI)

- 상태 기반 AI (FSM): UZombieFSM 컴포넌트는 각 좀비(ACommonZombie)에 부착되어 동작하며, Idle(대기), Chase(추적), Attack(공격), Dead(사망) 등의 상태를 가짐
- 이동 및 추적: 플레이어를 추적하기 위해 언리얼의 내비게이션 및 AI 이동 기능을 사용 (세부 이동 로직은 FSM 내부 구현에 캡슐화)
- 시야 및 인지: 좀비가 플레이어를 발견하는 로직은 시야 각도와 거리 기반으로 구현
- 공격 및 피해 처리: 일정 간격으로 플레이어에게 피해를 주고, 좀비가 피해를 받을 때는 피격 반응 및 히트 부위 판정 후 데미지 처리

### 좀비 스폰 시스템 (Zombie Spawn System)

- 스폰 매니저: AZombieSpawnManager 액터를 통해 게임 내 좀비 생성과 제거를 관리
- 시작 시 지정된 최대 좀비 수(MaxZombieCount)만큼 좀비를 미리 생성하여 풀에 보관하고 (ZombiePool 큐 사용) 대기시킵니다

- 스폰 포인트: 맵 곳곳에 배치된 AZombieSpawnPoint 액터들을 SpawnPoints 리스트에 수집하여 좀비를 소환할 위치로 사용
- 게임 시작 시 초기 좀비들을 SpawnPoint 위치에 생성하거나 풀에 대기
- 좀비가 사망하거나 비활성화되면 다시 풀에 반환하여 리스폰에 활용

- 호드(Horde) 이벤트: 특정 트리거나 시간에 호드 이벤트가 발생하면 CallHorde() 함수가 호출되어 대량의 좀비를 한꺼번에 난입
- 설정된 수(NumOfHorde)만큼 풀에서 좀비를 꺼내 각 스폰 포인트에 배치

### 전투 및 피해 시스템 (Combat & Damage)

- 피해 유형: 데미지 타입 클래스를 정의하여 피해 원인에 따라 서로 다른 처리

### UI 

- 크로스헤어 및 타격 표시를 통해 이동 / 좀비 타격 피드백
- 레이어가 피해를 입었을 때 화면에 피격 효과 애니메이션 재생

---

## 사용 기술

- **Unreal Engine 5**
- **C++ / Blueprint 혼합 구조**
- **Niagara Particle System** (좀비 피격, 무기 공격 등 특수 효과)
- **FSM** (좀비 AI 구현에 FSM 패턴을 도입)
- **UMG** (UI 구성 및 HUD)
- **AIController / NavMesh** (적 추적 및 경로 이동)

---

## 회고 및 개선 사항

이 프로젝트를 진행하면서 FPS 게임 개발의 전반적인 과정을 경험할 수 있었습니다.

C++로 언리얼 엔진의 다양한 기능들을 사용하며 엔진 구조와 게임 플레이 프레임워크에 대한 이해도를 높였고, 블루프린트와 C++ 연계를 통해 효과적으로 개발하는 법을 배웠습니다.

특히 FSM을 통해 AI를 구현하면서 상태 관리의 중요성을 깨달았고, UObject와 Actor 컴포넌트 시스템을 활용한 확장 방법을 익혔습니다.

또한 무기 시스템처럼 데이터 구조체(FWeaponData)로 여러 무기 유형을 관리하는 기법, 그리고 객체 풀링으로 성능을 최적화하는 패턴(ZombieSpawnManager)을 배워 큰 수의 적을 다루는 방법을 습득했습니다.

---

### 개선하고 싶은 점 및 향후 계획
- 멀티플레이어 지원: 현재는 1인의 생존자 플레이어를 전제로 한 구현이므로, 추후에는 언리얼의 네트워크 기능을 활용하여 코옵(co-op) 멀티플레이를 지원하고자 합니다. 이를 위해 캐릭터 복제, 서버-클라이언트 간 동기화, 적 AI의 서버 authoritative 처리 등을 추가로 학습할 필요가 있습니다.
- 추가 특수 감염자 구현: Left 4 Dead 시리즈의 다른 특수 좀비(예: Hunter, Smoker, Boomer 등)를 더 구현하여 게임 플레이 다양성을 높일 계획입니다.
- 코드 최적화 및 정리: 개발 과정에서 빠르게 구현하느라 임시로 만든 코드들을 차후 리팩토링하여 일관성을 유지하려 합니다. 불필요한 Tick 사용 제거, 메모리 관리 최적화 등 성능 향상을 위한 점검도 계속 진행할 것입니다.
